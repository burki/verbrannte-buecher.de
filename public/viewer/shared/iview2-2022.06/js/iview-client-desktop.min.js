var mycore,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();!function(e){var o,t,n;o=e.viewer||(e.viewer={}),t=o.model||(o.model={}),n=function(t){function e(e){return void 0===e&&(e="MyCoReDesktopToolbar"),t.call(this,e)||this}return __extends(e,t),e.prototype.addComponents=function(){this._viewSelectGroup=new o.widgets.toolbar.ToolbarGroup("viewSelectGroup",40),this.addGroup(this._sidebarControllGroup),this.addGroup(this._zoomControllGroup),this.addGroup(this._layoutControllGroup),this.addGroup(this._viewSelectGroup),this.addGroup(this._imageChangeControllGroup),this.addGroup(this._actionControllGroup),this.addGroup(this._searchGroup),this.addGroup(this._closeViewerGroup)},e.prototype.addViewSelectButton=function(){this.viewSelectChilds=new Array,this.viewSelectChilds.push({id:"imageView",label:"imageView"}),this.viewSelectChilds.push({id:"mixedView",label:"mixedView"}),this.viewSelectChilds.push({id:"textView",label:"textView"}),this.viewSelect=new o.widgets.toolbar.ToolbarDropdownButton("viewSelect","viewSelect",this.viewSelectChilds,"eye"),null!=this._viewSelectGroup&&void 0!==this._viewSelectGroup&&this._viewSelectGroup.addComponent(this.viewSelect)},e.prototype.addSelectionSwitchButton=function(){this.selectionSwitchButton=new o.widgets.toolbar.ToolbarButton("selectionSwitchButton","",""),this.selectionSwitchButton.icon="text-width"},e}(t.MyCoReBasicToolbarModel),t.MyCoReDesktopToolbarModel=n}(mycore||(mycore={})),function(t){var e,n,o;e=t.viewer||(t.viewer={}),n=e.components||(e.components={}),o=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t}return __extends(e,o),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.trigger(new n.events.ProvideToolbarModelEvent(this,new t.viewer.model.MyCoReDesktopToolbarModel))},e}(n.ViewerComponent),n.MyCoReDesktopToolbarProviderComponent=o}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReDesktopToolbarProviderComponent),function(e){var t,a,o;t=e.viewer||(e.viewer={}),a=t.components||(t.components={}),o=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t._currentZoom=-1,t._currentRotation=-1,t}return __extends(e,o),e.prototype.init=function(){this._informationBar=jQuery("<div></div>"),this._informationBar.addClass("informationBar"),this._scale=jQuery("<span></span>"),this._scale.addClass("scale"),this._scale.appendTo(this._informationBar),this._scaleEditForm=jQuery("<div class='form-group'></div>"),this._scaleEdit=jQuery("<input type='text'>"),this._scaleEdit.addClass("scale form-control"),this._scaleEdit.appendTo(this._scaleEditForm),this.initScaleChangeLogic(),this._informationBar.addClass("card"),this._imageLabel=jQuery("<span></span>"),this._imageLabel.addClass("imageLabel"),this._imageLabel.appendTo(this._informationBar),this._imageLabel.mousedown(Utils.stopPropagation).mousemove(Utils.stopPropagation).mouseup(Utils.stopPropagation),this._rotation=jQuery("<span>0 °</span>"),this._rotation.addClass("rotation"),this._rotation.appendTo(this._informationBar),this.trigger(new a.events.ComponentInitializedEvent(this)),this.trigger(new a.events.ShowContentEvent(this,this._informationBar,a.events.ShowContentEvent.DIRECTION_SOUTH,30)),this.trigger(new a.events.WaitForEvent(this,a.events.PageLayoutChangedEvent.TYPE)),this.trigger(new a.events.WaitForEvent(this,a.events.ImageChangedEvent.TYPE)),this.trigger(new a.events.WaitForEvent(this,a.events.ViewportInitializedEvent.TYPE)),this.trigger(new a.events.WaitForEvent(this,a.events.StructureModelLoadedEvent.TYPE))},e.prototype.initScaleChangeLogic=function(){var o=this;this._scale.click(function(){o._scale.detach(),o._scaleEdit.val(100*o._pageLayout.getCurrentPageZoom()+""),o._scaleEdit.appendTo(o._informationBar),Utils.selectElementText(o._scaleEdit.get(0)),o._scaleEdit.keyup(function(e){var t=o.validateScaleEdit();13==e.keyCode?t&&(o.applyNewZoom(),o.endEdit()):27==e.keyCode&&o.endEdit()})})},e.prototype.endEdit=function(){this._scaleEdit.remove(),this._scale.appendTo(this._informationBar)},e.prototype.applyNewZoom=function(){var e=this._scaleEdit.val().trim();void 0!==this._pageLayout&&null!=this._pageLayout&&this._pageLayout.setCurrentPageZoom(e/100)},e.prototype.validateScaleEdit=function(){var e=this._scaleEdit.val().trim();if(isNaN(e))return this._scaleEdit.addClass("error"),!1;var t=1*e;return t<50||400<t?(this._scaleEdit.addClass("error"),!1):(this._scaleEdit.removeClass("error"),!0)},Object.defineProperty(e.prototype,"handlesEvents",{get:function(){var e=new Array;return e.push(a.events.ImageChangedEvent.TYPE),e.push(a.events.StructureModelLoadedEvent.TYPE),e.push(a.events.ViewportInitializedEvent.TYPE),e.push(a.events.PageLayoutChangedEvent.TYPE),e},enumerable:!0,configurable:!0}),e.prototype.handle=function(e){var o=this;if(e.type==a.events.StructureModelLoadedEvent.TYPE&&this.updateLayoutInformation(),e.type==a.events.ViewportInitializedEvent.TYPE){var t=e;t.viewport.scaleProperty.addObserver({propertyChanged:function(e,t){o.updateLayoutInformation()}}),t.viewport.rotationProperty.addObserver({propertyChanged:function(e,t){o.updateLayoutInformation()}}),t.viewport.positionProperty.addObserver({propertyChanged:function(e,t){o.updateLayoutInformation()}}),t.viewport.sizeProperty.addObserver({propertyChanged:function(e,t){o.updateLayoutInformation()}})}if(e.type==a.events.PageLayoutChangedEvent.TYPE){var n=e;this._pageLayout=n.pageLayout,this.updateLayoutInformation()}if(e.type==a.events.ImageChangedEvent.TYPE){var i=e;if(void 0!==i.image&&null!=i.image){var r=i.image.orderLabel||i.image.order;null!=i.image.uniqueIdentifier&&(r+=" - "+i.image.uniqueIdentifier),this._imageLabel.text(r)}this.updateLayoutInformation()}},e.prototype.updateLayoutInformation=function(){if(void 0!==this._pageLayout){var e=this._pageLayout.getCurrentPageZoom();this._currentZoom!=e&&(this._scale.text(Math.round(100*e)+"%"),this._currentZoom=e);var t=this._pageLayout.getCurrentPageRotation();this._currentRotation!=t&&(this._rotation.text(t+" °"),this._currentRotation=t)}},Object.defineProperty(e.prototype,"container",{get:function(){return this._informationBar},enumerable:!0,configurable:!0}),e}(a.ViewerComponent),a.MyCoReImageInformationComponent=o}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReImageInformationComponent),function(e){var t,a,o,n;t=e.viewer||(e.viewer={}),a=t.widgets||(t.widgets={}),o=a.canvas||(a.canvas={}),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rotation=0,e._currentPage=0,e.maximalPageScale=4,e}return __extends(e,t),Object.defineProperty(e.prototype,"relocated",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.syncronizePages=function(){var t=this,e=this._pageController.viewport,o=this.getPageHeightWithSpace(),n=this._model.pageCount/2;this.correctViewport();var i=90==this._rotation||270==this._rotation?1:2,r=1==i?2:1;this._horizontalScrollbar.viewSize=this._pageController.viewport.size.width/this._pageController.viewport.scale,this._verticalScrollbar.viewSize=this._pageController.viewport.size.height/this._pageController.viewport.scale,this._horizontalScrollbar.areaSize=this._pageDimension.width*i,this._verticalScrollbar.areaSize=n*this.getPageHeightWithSpace()+this._verticalScrollbar.viewSize/2-this.getPageHeightSpace(),this._horizontalScrollbar.position=e.position.x-e.size.width/e.scale/2+this._pageDimension.width/r,this._verticalScrollbar.position=e.position.y-e.size.height/e.scale/2;for(var a=e.size.height/e.scale,s=e.position.y-a/2,l=e.position.y+a/2,h=2*Math.floor(s/o),c=2*Math.ceil(l/o)+(this.relocated?1:0),u=this._insertedPages.slice(0),p=h;p<=c;p++)this._model.children.has(p)&&-1==u.indexOf(p)?u.push(p):0<p&&p<=this._model.pageCount&&this._pageLoader(p);u.forEach(function(e){t.updatePage(e)})},e.prototype.clear=function(){var t=this,e=this._pageController.getPages().slice(0);this._insertedPages.splice(0,this._insertedPages.length),e.forEach(function(e){t._pageController.removePage(e)})},e.prototype.fitToScreen=function(){var e=this._pageController.viewport;if(0!=e.size.width&&0!=e.size.height){var t=this.getDoublePageRect(this.getCurrentPage());e.setRect(t)}},e.prototype.calculatePageAreaInformation=function(e){var t=this._model.children.get(e).size,o=new a.canvas.PageAreaInformation,n=this.getPageRect(e),i=this._model.children.get(e);o.scale=Math.min(this._originalPageDimension.width/t.width,this._originalPageDimension.height/t.height);var r=i.size.scale(o.scale);return o.position=new Position2D(n.pos.x+r.width/2,n.pos.y+r.height/2),o.rotation=this._rotation,o},e.prototype.checkShouldBeInserted=function(e){var t=this._pageController.viewport.asRectInArea(),o=this.getImageMiddle(e),n=new Rect(new Position2D(o.x-this._pageDimension.width,o.y-this._pageDimension.height/2),new Size2D(2*this._pageDimension.width,this._pageDimension.height));return null!=t.getIntersection(n)||null!=this.getCurrentOverview().getIntersection(n)},e.prototype.fitToWidth=function(e){void 0===e&&(e=!1);var t=this.getDoublePageRect(this.getCurrentPage());this._pageController.viewport.position=t.getMiddlePoint(),this._pageController.viewport.scale=this._pageController.viewport.size.width/t.size.width},e.prototype.getCurrentPage=function(){for(var e=this._pageController.viewport,t=this.getPageHeightWithSpace(),o=(this._model.pageCount,e.size.height/e.scale),n=e.position.y-o/2,i=e.position.y+o/2,r=2*Math.floor(n/t),a=2*Math.ceil(i/t)+(this.relocated?1:0),s=-1,l=-1,h=!1,c=e.asRectInArea(),u=r;u<=a;u++){var p=this.getPageRect(u).getIntersection(c);if(null!=p&&(!h||u==this._currentPage)){var d=p.size.getSurface();l<d&&(s=u,l=d,p.intersects(e.position)&&(h=!0))}}return Math.max(-1,s)},e.prototype.jumpToPage=function(e){this.getImageMiddle(e),this._currentPage=e,this._pageController.viewport.setRect(this.getPageRect(e))},e.prototype.getPageHeightSpace=function(){return this._pageDimension.height/100*10},e.prototype.getPageHeightWithSpace=function(){var e=90==this._rotation||270==this._rotation?2:1;return this._pageDimension.height*e+this.getPageHeightSpace()},e.prototype.getImageMiddle=function(e){return this.getPageRect(e).getMiddlePoint()},e.prototype.correctViewport=function(){var e=this._pageController.viewport,t=90==this._rotation||270==this._rotation?1:2,o=this.getCurrentPageScaling();if(-1!=o){var n=this._pageController.viewport.size.width/(this._pageDimension.width*t),i=Math.min(this._pageController.viewport.size.height/(2*this._pageDimension.height),n);e.scale<i&&(e.stopAnimation(),e.scale=i),e.scale*o>this.maximalPageScale&&(e.stopAnimation(),e.scale=this.maximalPageScale/o)}var r=e.size.scale(1/e.scale),a=90===this._rotation||270===this._rotation?((this.relocated?1:0)+this._model.pageCount)/2*this.getPageHeightWithSpace():Math.ceil(((this.relocated?1:0)+this._model.pageCount)/2)*this.getPageHeightWithSpace(),s=Math.min(Math.max(e.position.y,1),a);if(r.width>this._pageDimension.width*t){var l=new Position2D(0,s);e.position.equals(l)||(e.position=new Position2D(0,s))}else{var h=-this._pageDimension.width/(2/t)+r.width/2,c=this._pageDimension.width/(2/t)-r.width/2,u=Math.max(h,Math.min(c,e.position.x));l=new Position2D(u,s),e.position.equals(l)||(e.position=l)}},e.prototype.scrollhandler=function(){if(null==this._pageController.viewport.currentAnimation){var e=90==this._rotation||270==this._rotation?2:1,t=this._pageController.viewport,o=new Position2D(this._horizontalScrollbar.position,this._verticalScrollbar.position),n=o.x+t.size.width/t.scale/2-this._pageDimension.width/e;t.position=new Position2D(n,o.y+t.size.height/t.scale/2)}},e.prototype.rotate=function(e){var t=this.getCurrentPage();this._pageDimension=this._originalPageDimension.getRotated(e),this._rotation=e,this.clear(),this.syncronizePages(),this.jumpToPage(t)},e.prototype.getLabelKey=function(){return"doublePageLayout"},e.prototype.getCurrentOverview=function(){return this.getDoublePageRect(this.getCurrentPage())},e.prototype.getDoublePageRect=function(e){var t;Math.floor((e-1+(this.relocated?1:0))/2),t=(e-1+(this.relocated?1:0))%2==0?e:e-1;var o=this.getPageRect(t),n=this.getPageRect(t+1);return Rect.getBounding(o,n)},e.prototype.getPageRect=function(e){var t=Math.floor((e-1+(this.relocated?1:0))/2),o=(e-1+(this.relocated?1:0))%2==0,n=this.getRealPageDimension(e),i=t*this.getPageHeightWithSpace();switch(this._rotation){case 0:case 180:return(0==this._rotation?o:!o)?new Rect(new Position2D(-n.width,i),n):new Rect(new Position2D(0,i),n);case 90:case 270:return(90==this._rotation?o:!o)?new Rect(new Position2D(-n.width/2,i-n.height/2),n):new Rect(new Position2D(-n.width/2,i+this._pageDimension.height-n.height/2),n)}},e.prototype.next=function(){var e=this.getCurrentPage(),t=(e-1+(this.relocated?1:0))%2==0&&(0==this._rotation||180==this._rotation),o=Math.max(Math.min(e+(t?2:1),this._model.pageCount),0);this.jumpToPage(o)},e.prototype.previous=function(){var e=this.getCurrentPage(),t=(e-1+(this.relocated?1:0))%2==0&&(0==this._rotation||180==this._rotation),o=Math.max(Math.min(e-(t?1:2),this._model.pageCount),0);this.jumpToPage(o)},e.prototype.getCurrentPageRotation=function(){return this._rotation},e.prototype.getCurrentPageZoom=function(){var e=this.getCurrentPageScaling();return-1!==e?this._pageController.viewport.scale*e:this._pageController.viewport.scale},e.prototype.setCurrentPageZoom=function(e){if(void 0!==this._pageController){var t=this.getCurrentPageScaling();this._pageController.viewport.scale=e/t}},e.prototype.getCurrentPageScaling=function(){if(void 0===this._model)return-1;var e=this.getCurrentPage();if(-1!=e&&this._model.children.has(e)){var t=this._model.children.get(e),o=this._pageController.getPageAreaInformation(t);if(void 0!==o)return o.scale}return-1},e.prototype.setCurrentPositionInPage=function(e){var t=this._pageController.viewport.asRectInArea(),o=this.getCurrentPage(),n=this.getImageMiddle(o),i=this._pageDimension,r=new Position2D(n.x-i.width/2,n.y-i.height/2);this._pageController.viewport.position=new Position2D(r.x+e.x+t.size.width/2,r.y+e.y+t.size.height/2)},e}(o.PageLayout),o.DoublePageLayout=n}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.canvas||(o.canvas={}),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"relocated",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.getLabelKey=function(){return"doublePageRelocatedLayout"},t}(n.DoublePageLayout),n.DoublePageRelocatedLayout=i}(mycore||(mycore={})),function(e){var n,i,t;n=e.viewer||(e.viewer={}),i=n.components||(n.components={}),t=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t}return __extends(e,o),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=new n.widgets.canvas.SinglePageLayout,t=new n.widgets.canvas.DoublePageLayout,o=new n.widgets.canvas.DoublePageRelocatedLayout;e.maximalPageScale=t.maximalPageScale=o.maximalPageScale=parseInt(this._settings.maximalPageScale,10)||4,this.trigger(new i.events.ProvidePageLayoutEvent(this,e,!0)),this.trigger(new i.events.ProvidePageLayoutEvent(this,t)),this.trigger(new i.events.ProvidePageLayoutEvent(this,o))},e}(i.ViewerComponent),i.MyCoRePageDesktopLayoutProviderComponent=t}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoRePageDesktopLayoutProviderComponent),function(e){var t;(function(e){var t=function(){function e(){}return e.prototype.index=function(e,t,o){this.model=e,this.textContentResolver=t,this.processIndicator=o},e.prototype.search=function(e,t,o,n,i){throw new ViewerError(this+" doesnt implements search();",{searchMethod:this.search})},e}();e.MyCoReViewerSearcher=t;var o=function(e,t,o){this.arr=e,this.matchWords=t,this.context=o};e.ResultObject=o})((t=e.viewer||(e.viewer={})).model||(t.model={}))}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.components||(t.components={}),n=o.events||(o.events={}),i=function(n){function i(e,t){var o=n.call(this,e,i.TYPE)||this;return o._searcher=t,o}return __extends(i,n),Object.defineProperty(i.prototype,"searcher",{get:function(){return this._searcher},enumerable:!0,configurable:!0}),i.TYPE="ProvideViewerSearcherEvent",i}(n.MyCoReImageViewerEvent),n.ProvideViewerSearcherEvent=i}(mycore||(mycore={})),function(e){var t,o;t=e.viewer||(e.viewer={}),function(e){var t=function(){function e(){this.selected=[],this.areas=new MyCoReMap}return e.prototype.select=function(e,t){this.selected.push(new n(e,t))},e.prototype.add=function(e,t){var o=this.areas.get(e);null==o&&(o=new Array,this.areas.set(e,o)),o.push(new n(e,t))},e.prototype.clear=function(){this.selected=[],this.areas.clear()},e.prototype.clearSelected=function(){this.selected=[]},e.prototype.draw=function(t,o,n,e){var i=this;void 0===e&&(e=!1),this.selected.forEach(function(e){null!=i.selected&&o===e.page&&i.drawWithPadding(t,[e],n)}),this.areas.hasThen(o,function(e){i.drawWords(t,e)})},e.prototype.drawWithPadding=function(r,e,t){r.save(),r.strokeStyle="rgba(244, 244, 66, 0.8)";var a=Math.max(t.width/200,t.height/200)*window.devicePixelRatio;r.lineWidth=a,r.beginPath(),e.forEach(function(e){var t=e.rect.getX()-a/2,o=e.rect.getY()-a/2,n=e.rect.getWidth()+a,i=e.rect.getHeight()+a;r.rect(t,o,n,i)}),r.closePath(),r.stroke(),r.restore()},e.prototype.drawWords=function(t,e){t.save(),t.fillStyle="rgba(179,216,253,0.6)",t.beginPath(),e.forEach(function(e){t.rect(e.rect.getX(),e.rect.getY(),e.rect.getWidth(),e.rect.getHeight())}),t.closePath(),t.fill(),t.restore()},e}();e.SearchResultCanvasPageLayer=t;var n=function(e,t){this.page=e,this.rect=t}}((o=t.widgets||(t.widgets={})).canvas||(o.canvas={}))}(mycore||(mycore={})),function(h){var n,c,e;n=h.viewer||(h.viewer={}),c=n.components||(n.components={}),e=function(t){function e(e){var o=t.call(this)||this;return o._settings=e,o._sidebarLabel=jQuery("<span>Suche</span>"),o._model=null,o._valueToApply=null,o._containerVisible=!1,o._indexPrepared=!1,o._indexPreparing=!1,o._textPresent=!1,o._toolbarTextInput=new n.widgets.toolbar.ToolbarTextInput("search","",""),o._searcher=null,o._imageHrefImageMap=new MyCoReMap,o._searchResultCanvasPageLayer=new n.widgets.canvas.SearchResultCanvasPageLayer,o._containerVisibleModelLoadedSync=Utils.synchronize([function(e){return null!=e._model},function(e){return e._containerVisible},function(e){return null!=e._searcher},function(e){return!o._indexPrepared&&!o._indexPreparing}],function(e){return e._prepareIndex(e._model)}),o._toolbarLoadedLanguageModelLoadedSync=Utils.synchronize([function(e){return null!=e._tbModel},function(e){return null!=e._languageModel},function(e){return null!=e._model},function(e){return e._textPresent}],function(e){o.trigger(new c.events.AddCanvasPageLayerEvent(o,1,o._searchResultCanvasPageLayer));var t=e._languageModel.getTranslation("sidebar.search");o._toolbarTextInput.placeHolder=e._languageModel.getTranslation("search.placeHolder"),e._sidebarLabel.text(t),e._tbModel._searchGroup.addComponent(o._toolbarTextInput),null!=o._valueToApply&&(o._toolbarTextInput.value=o._valueToApply,o._valueToApply=null)}),o._tbModel=null,o._languageModel=null,o._panel=null,o._progressbar=null,o._progressbarInner=null,o._searchTextTimeout=-1,o._searchAreaReady=!1,o}return __extends(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),e.prototype.initSearchArea=function(){this._progressbar.parent().remove(),this._progressbar.remove(),this._container.css({"text-align":"left"}),this._searchContainer=jQuery("<ul class='list-group textSearch'></ul>"),this._searchContainer.appendTo(this.container),this._searchAreaReady=!0,this._search(this._toolbarTextInput.value)},e.prototype.init=function(){var o=this;this._container=jQuery("<div></div>"),this._container.css({overflowY:"scroll","text-align":"center"}),this._container.bind("iviewResize",function(){o.updateContainerSize()}),this._panel=jQuery("<div class='card search'></div>"),this._container.append(this._panel),this._initProgressbar(),this._panel.append(this._progressbar),this._toolbarTextInput.getProperty("value").addObserver({propertyChanged:function(e,t){o.openSearch(),o._searchAreaReady&&(-1!=o._searchTextTimeout&&(window.clearTimeout(o._searchTextTimeout),o._searchTextTimeout=-1),o._searchTextTimeout=window.setTimeout(function(){o._search(o._toolbarTextInput.value)},300))}}),this.trigger(new c.events.WaitForEvent(this,c.events.ProvideViewerSearcherEvent.TYPE)),this.trigger(new c.events.WaitForEvent(this,c.events.StructureModelLoadedEvent.TYPE)),this.trigger(new c.events.WaitForEvent(this,c.events.ProvideToolbarModelEvent.TYPE)),this.trigger(new c.events.WaitForEvent(this,c.events.LanguageModelLoadedEvent.TYPE)),this.trigger(new c.events.WaitForEvent(this,c.events.RestoreStateEvent.TYPE))},e.prototype._search=function(e){var s=this;if(""==e){var t=this._settings.mobile?c.events.ShowContentEvent.DIRECTION_CENTER:c.events.ShowContentEvent.DIRECTION_EAST;this.trigger(new c.events.ShowContentEvent(this,this._container,t,0,this._sidebarLabel))}this._searchContainer.children().remove();var o=[];this._searcher.search(e,function(e){0==e.length&&"true"===s._settings.embedded&&s.hideContainer(),e.forEach(function(e){e.arr.forEach(function(e){return o.push(e)})});var a=null;e.forEach(function(e){if(!(e.arr.length<=0)){var t=jQuery("<li class='list-group-item'></li>"),o=jQuery("<a></a>").append(e.context.clone());t.append(o),s._searchContainer.append(t);var n=e.arr[0];if(s._imageHrefImageMap.has(n.pageHref)){var i=s._imageHrefImageMap.get(n.pageHref);o.click(function(){null!=a&&(a.removeClass("active"),s._searchResultCanvasPageLayer.clearSelected()),(a=t).addClass("active"),e.arr.forEach(function(e){var t=Rect.fromXYWH(e.pos.x,e.pos.y,e.size.width,e.size.height);s._searchResultCanvasPageLayer.select(e.pageHref,t)}),s.trigger(new c.events.ImageSelectedEvent(s,i)),s.trigger(new c.events.RedrawEvent(s))});var r=jQuery("<span class='childLabel'>"+(i.orderLabel||i.order)+"</span>");t.append(r)}else console.log("Could not find page "+n.pageHref)}})},function(){s._searchResultCanvasPageLayer.clear(),o.forEach(function(e){var t=Rect.fromXYWH(e.pos.x,e.pos.y,e.size.width,e.size.height);s._searchResultCanvasPageLayer.add(e.pageHref,t)}),s.trigger(new c.events.RedrawEvent(s))})},e.prototype.hideContainer=function(){var e=this._settings.mobile?c.events.ShowContentEvent.DIRECTION_CENTER:c.events.ShowContentEvent.DIRECTION_EAST;this.trigger(new c.events.ShowContentEvent(this,this._container,e,0,this._sidebarLabel))},e.prototype.updateContainerSize=function(){this._container.css({height:this._container.parent().height()-this._sidebarLabel.parent().outerHeight()+"px"})},Object.defineProperty(e.prototype,"handlesEvents",{get:function(){var e=new Array;return e.push(c.events.StructureModelLoadedEvent.TYPE),e.push(h.viewer.widgets.toolbar.events.DropdownButtonPressedEvent.TYPE),e.push(c.events.ProvideToolbarModelEvent.TYPE),e.push(c.events.LanguageModelLoadedEvent.TYPE),e.push(c.events.ShowContentEvent.TYPE),e.push(c.events.ProvideViewerSearcherEvent.TYPE),e.push(c.events.RequestStateEvent.TYPE),e.push(c.events.RestoreStateEvent.TYPE),e},enumerable:!0,configurable:!0}),e.prototype.handle=function(e){if(e.type==c.events.StructureModelLoadedEvent.TYPE){var t=e;this._model=t.structureModel,this._textPresent=t.structureModel._textContentPresent,this._toolbarLoadedLanguageModelLoadedSync(this),this._containerVisibleModelLoadedSync(this)}if(e.type==h.viewer.widgets.toolbar.events.DropdownButtonPressedEvent.TYPE&&"search"==e.childId&&this.openSearch(),e.type==c.events.ProvideToolbarModelEvent.TYPE){var o=e;this._tbModel=o.model,this._toolbarLoadedLanguageModelLoadedSync(this)}if(e.type==c.events.LanguageModelLoadedEvent.TYPE){var n=e;this._languageModel=n.languageModel,this._toolbarLoadedLanguageModelLoadedSync(this)}if(e.type==c.events.ShowContentEvent.TYPE){var i=e;i.containerDirection==c.events.ShowContentEvent.DIRECTION_EAST&&i.content==this._container&&(0==i.size?(this._searchResultCanvasPageLayer.clear(),this.trigger(new c.events.RedrawEvent(this))):this._searchAreaReady&&0<this._toolbarTextInput.value.length&&this._search(this._toolbarTextInput.value))}if(e.type==c.events.ProvideViewerSearcherEvent.TYPE){var r=e;this._searcher=r.searcher,this._containerVisibleModelLoadedSync(this)}if(e.type==c.events.RequestStateEvent.TYPE){var a=e;if(null!=this._searchAreaReady){var s=this._toolbarTextInput.value;null!=s&&""!=s&&a.stateMap.set("q",s)}}if(e.type==c.events.RestoreStateEvent.TYPE&&(a=e).restoredState.has("q")){var l=a.restoredState.get("q");this.openSearch(),null!=this._searchAreaReady?this._toolbarTextInput.value=l:this._valueToApply=l}},e.prototype.openSearch=function(){var e=this._settings.mobile?c.events.ShowContentEvent.DIRECTION_CENTER:c.events.ShowContentEvent.DIRECTION_EAST;this.trigger(new c.events.ShowContentEvent(this,this._container,e,-1,this._sidebarLabel)),this.updateContainerSize(),this._containerVisible=!0,this._containerVisibleModelLoadedSync(this)},e.prototype._prepareIndex=function(e){var o=this;this._model._imageList.forEach(function(e){o._imageHrefImageMap.set(e.href,e)}),this._indexPreparing=!0,this._searcher.index(e,function(e,t){o.trigger(new c.events.RequestTextContentEvent(o,e,t))},function(e,t){o._updateLabel(e,t),t==e&&(o._indexPrepared=!0,o.initSearchArea())})},e.prototype._updateLabel=function(e,t){this._progressbarInner.attr({"aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":t}),this._progressbarInner.css({width:e/t*100+"%"})},e.prototype._initProgressbar=function(){this._progressbar=jQuery("<div></div>"),this._progressbar.addClass("progress"),this._progressbarInner=jQuery("<div></div>"),this._progressbarInner.addClass("progress-bar progress-bar-info"),this._progressbarInner.appendTo(this._progressbar),this._progressbarInner.attr({role:"progressbar"})},e}(c.ViewerComponent),c.MyCoReSearchComponent=e}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReSearchComponent),function(e){var t,o;t=e.viewer||(e.viewer={}),function(e){var t=function(){function s(e){this._fullTextProvider=e,this._fullTextInformationIndex=[],this._currentPosition=0,this._fullText=""}return s.prototype.addElement=function(e){var t,o=this._fullTextProvider(e);for(s.MATCH_WORD_REGEXP.lastIndex=0;null!=(t=s.MATCH_WORD_REGEXP.exec(o));)this._fullTextInformationIndex[this._currentPosition+t.index]=e;" "==o.charAt(o.length-1)?(this._fullText+=o,this._currentPosition+=o.length):(this._fullText+=o+" ",this._currentPosition+=o.length+1)},s.prototype.search=function(o){var n="",e=o.split(/\s/).filter(function(e){return""!=e});e.forEach(function(e,t){n+=(0==t?"":"\\s")+(o.length<=3?s.MATCH_TEMPLATE_WORD_SHORT.replace("%TOKEN%",e):s.MATCH_TEMPLATE_WORD.replace("%TOKEN%",e))});var t,i=new RegExp(s.MATCH_TEMPLATE.replace("%WORDS%",n),s.MATCH_PARAMETER),r=new Array,a=1e3;if(0<o.length||0<o.replace(" ","").length)for(;(t=i.exec(this._fullText))&&a--;)this.extractResults(t,r,e);return new l(r,r.length)},s.prototype.extractResults=function(e,t,o){for(var n=e.index,i=e[0],r=i.split(" "),a=0,s=-1,l=this.getContext(n+i.length-i.length/2,o),h=null;void 0!==this._fullTextInformationIndex[n+a]&&(h=this._fullTextInformationIndex[n+a],t.push(new c([h],o,l))),a+=r[++s].length+1,s+1<r.length;);return h},s.prototype.getContext=function(e,t){var o=this._fullText.substr(Math.max(0,e-s.DEFAULT_CONTEXT_SIZE/2),s.DEFAULT_CONTEXT_SIZE);return(t=t.sort(function(e,t){return e.length-t.length})).forEach(function(e){""!=e&&(o=o.replace(new RegExp(e,"gim"),"<span class='"+s.TEXT_HIGHLIGHT_CLASSNAME+"'>$&</span>"))}),jQuery("<span>"+o+"</span>")},s.DEFAULT_CONTEXT_SIZE=100,s.TEXT_HIGHLIGHT_CLASSNAME="matched",s.MATCH_TEMPLATE_WORD="(\\b([a-zA-Z]*%TOKEN%[a-zA-Z]*)\\b)",s.MATCH_TEMPLATE_WORD_SHORT="(\\b%TOKEN%\\b)",s.MATCH_TEMPLATE="%WORDS%",s.MATCH_PARAMETER="gim",s.MATCH_WORD_REGEXP=new RegExp("\\b([a-zA-Z]+)\\b",s.MATCH_PARAMETER),s}();e.TextIndex=t;var l=function(e,t){this.results=e,this.count=t};e.SearchResult=l;var c=function(e,t,o){this.arr=e,this.matchWords=t,this.context=o};e.IndexResultObject=c}((o=t.widgets||(t.widgets={})).index||(o.index={}))}(mycore||(mycore={})),function(e){var t,o,n;t=e.viewer||(e.viewer={}),o=t.model||(t.model={}),n=function(n){function a(){var e=n.call(this)||this;return e._searchIndex=new t.widgets.index.TextIndex(function(e){return e.text}),e}return __extends(a,n),a.prototype.index=function(e,t,o){n.prototype.index.call(this,e,t,o),this.indexModel()},a.prototype.indexModel=function(){var o=this,n=this.textContentResolver,i=this.processIndicator,r=0;this.model.imageList.forEach(function(e,t){n(e.additionalHrefs.get(a.PDF_TEXT_HREF),function(e,t){o.indexPage(t),i(r,o.model._imageList.length-1),r++})})},a.prototype.indexPage=function(e){var t=this;e.content.forEach(function(e){t._searchIndex.addElement(e)})},a.prototype.clearDoubleResults=function(e){var o={};return e.filter(function(e){var t=Utils.hash(e.context.text()+e.matchWords.join(""));return!(t in o)&&(o[t]=!0)})},a.prototype.search=function(e,t,o,n,i){var r=this._searchIndex.search(e).results;t(r=this.clearDoubleResults(r)),o(r.length)},a.PDF_TEXT_HREF="pdfText",a}(o.MyCoReViewerSearcher),o.MyCoReLocalIndexSearcher=n}(mycore||(mycore={})),function(t){var e,n,o;e=t.viewer||(t.viewer={}),n=e.components||(e.components={}),o=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t}return __extends(e,o),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.init=function(){"pdf"==this._settings.doctype&&this.trigger(new n.events.ProvideViewerSearcherEvent(this,new t.viewer.model.MyCoReLocalIndexSearcher))},e}(n.ViewerComponent),n.MyCoReLocalViewerIndexSearcherProvider=o}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReLocalViewerIndexSearcherProvider),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.solr||(o.solr={}),i=function(){function e(e,t,o,n){this.solrHandlerURL=e,this.derivateID=t,this.query=o,this.requestCallback=n,this.request=null,this._solrRequestResult=null,this._isComplete=!1}return Object.defineProperty(e.prototype,"solrRequestResult",{get:function(){return this._solrRequestResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0}),e.prototype.startRequest=function(){var n=this,e={url:this.buildRequestURL(),async:!0,success:function(e){n.isComplete||(n.processResponse(e),n.requestCallback(!0))},error:function(e,t,o){console.log(o),n.requestCallback(!1)}};this.request=jQuery.ajax(e)},e.prototype.abortRequest=function(){this.isComplete?console.debug("request is already complete!"):null!=this.request&&void 0!==this.request?(this.requestCallback=function(){},this.request.abort("request abort")):console.debug("request object is null!")},e.prototype.processResponse=function(e){this._isComplete=!0,this._solrRequestResult=e},e.prototype.buildRequestURL=function(){return ViewerFormatString(e.BASE_TEMPLATE,{solrHandlerURL:this.solrHandlerURL,query:this.query,derivateID:this.derivateID})},e.BASE_TEMPLATE="{solrHandlerURL}/{derivateID}?q={query}",e}(),n.SolrSearchRequest=i}(mycore||(mycore={})),function(e){var a;(function(h){var e=function(i){function l(e,t){var o=i.call(this)||this;return o.solrHandlerURL=e,o.derivateId=t,o.resolver=null,o._altoHrefPageMap=new MyCoReMap,o._currentRequest=null,o}return __extends(l,i),l.prototype.index=function(e,t,o){var n=this;i.prototype.index.call(this,e,t,o),e._imageList.forEach(function(e){var t=e.additionalHrefs.get(l.TEXT_HREF);null!=t&&n._altoHrefPageMap.set(t,e)}),o(1,1),this.resolver=t},l.prototype.search=function(e,t,o,n,i){var r=this;null==this._currentRequest||this._currentRequest.isComplete||this._currentRequest.abortRequest(),""!=e?(this._currentRequest=new a.widgets.solr.SolrSearchRequest(this.solrHandlerURL,this.derivateId,e,function(){console.log(r._currentRequest.solrRequestResult),t(r.extractSearchResults(e,r._currentRequest.solrRequestResult)),o()}),this._currentRequest.startRequest()):t([])},l.prototype.extractSearchResults=function(e,t){var n=this,s=[];return t.forEach(function(e){var t=e.id.split("/");t.shift();var o=t.join("/");if(n._altoHrefPageMap.has(o)){var a=n._altoHrefPageMap.get(o);e.hits.forEach(function(e){var t=e.hl.split("<em>").join("<em class='"+l.TEXT_HIGHLIGHT_CLASSNAME+"'>"),o=document.createElement("div");o.innerHTML=t;var n=e.positions.map(function(e){return e.content}),i=[];e.positions.forEach(function(e){i.push(new c(e,a.href))});var r=new h.ResultObject(i,n,jQuery(o));r.order=a.order,s.push(r)})}else console.error("solr results contains a alto file which is not found in alto!")}),s.sort(function(e,t){return e.order-t.order})},l.TEXT_HIGHLIGHT_CLASSNAME="matched",l.TEXT_HREF="AltoHref",l}(h.MyCoReViewerSearcher);h.MyCoReSolrSearcher=e;var c=function(){function e(e,t){this.angle=0,this.size=new Size2D(e.width,e.height),this.pos=new Position2D(e.xpos,e.vpos),this.fontFamily="arial",this.fontSize=this.size.height,this.fromBottomLeft=!1,this.pageHref=t}return e.prototype.toString=function(){return this.pageHref.toString+"-"+this.pos.toString()+"-"+this.size.toString()},e}();h.SolrAltoTextContent=c})((a=e.viewer||(e.viewer={})).model||(a.model={}))}(mycore||(mycore={})),function(n){var i;(function(t){var e=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t._settings.solrHandlerURL=t._settings.webApplicationBaseURL+"/rsc/alto/highlight",t}return __extends(e,o),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.init=function(){"mets"==this._settings.doctype&&this.trigger(new t.events.ProvideViewerSearcherEvent(this,new n.viewer.model.MyCoReSolrSearcher(this._settings.solrHandlerURL,this._settings.derivate)))},e}(t.ViewerComponent);t.MyCoReSolrSearcherProvider=e;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.MyCoReViewerSettings);t.SolrSearcherSettings=o})((i=n.viewer||(n.viewer={})).components||(i.components={}))}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReSolrSearcherProvider),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){this._id=e,this.element=jQuery("<p></p>"),this.element.addClass("navbar-text")}return e.prototype.updateText=function(e){this.element.text(e)},e.prototype.getElement=function(){return this.element},e}(),n.BootstrapTextView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){this._element=jQuery("<img />"),this._element.attr("data-id",e)}return e.prototype.updateHref=function(e){this._element.attr("src",e)},e.prototype.getElement=function(){return this._element},e}(),n.BootstrapImageView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e,t,o){this._element=jQuery("<div></div>"),this._element.attr("data-id",e),this._element.addClass("btn-group"),null!==o&&"right"===o&&this._element.addClass("right"),this._element.attr("data-tb-order",t)}return e.prototype.addChild=function(e){this._element.append(e)},e.prototype.removeChild=function(e){e.remove()},e.prototype.getElement=function(){return this._element},e}(),n.BootstrapGroupView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){this._buttonElement=jQuery("<button></button>"),this._buttonElement.attr("data-id",e),this._buttonElement.addClass("btn btn-secondary navbar-btn"),this._buttonLabel=jQuery("<span></span>"),this._buttonLabel.appendTo(this._buttonElement),this._icon=jQuery("<i></i>"),this._attached=!1,this._lastIconClass="",this._lastButtonClass=null}return e.prototype.updateButtonLabel=function(e){this._buttonLabel.text(e),0<e.length?this._icon.addClass("textpresent"):this._icon.removeClass("textpresent")},e.prototype.updateButtonTooltip=function(e){this._buttonElement.attr("title",e)},e.prototype.updateButtonIcon=function(e){if(this._attached||null==e){if(this._attached&&null==e)return this._icon.remove(),void(this._attached=!1)}else this._icon.prependTo(this._buttonElement),this._attached=!0;this._icon.removeClass("fa-"+this._lastIconClass),this._icon.removeClass(this._lastIconClass),this._icon.removeClass("icon-"+this._lastIconClass),this._icon.addClass("fas"),this._icon.addClass("fa-"+e),this._lastIconClass=e},e.prototype.updateButtonClass=function(e){null!=this._lastButtonClass&&this._buttonElement.removeClass("btn-"+this._lastButtonClass),this._buttonElement.addClass("btn-"+e),this._lastButtonClass=e},e.prototype.updateButtonActive=function(e){var t=this._buttonElement.hasClass("active");e&&!t&&this._buttonElement.addClass("active"),!e&&t&&this._buttonElement.removeClass("active")},e.prototype.updateButtonDisabled=function(e){var t="disabled"==this._buttonElement.attr("disabled");e&&!t&&this._buttonElement.attr("disabled","disabled"),!e&&t&&this._buttonElement.removeAttr("disabled")},e.prototype.getElement=function(){return this._buttonElement},e}(),n.BootstrapButtonView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(o){function e(e){var t=o.call(this,e)||this;return t._buttonElement.attr("data-toggle","dropdown"),t._buttonElement.addClass("dropdown-toggle"),t._caret=jQuery("<span></span>"),t._caret.addClass("caret"),t._caret.appendTo(t._buttonElement),t._dropdownMenu=jQuery("<ul></ul>"),t._dropdownMenu.addClass("dropdown-menu"),t._dropdownMenu.attr("role","menu"),t._childMap=new MyCoReMap,t}return __extends(e,o),e.prototype.updateChilds=function(e){this._childMap.forEach(function(e,t){t.remove()}),this._childMap.clear();var t=!0;for(var o in e){var n=e[o],i=jQuery("");if("isHeader"in n&&n.isHeader)t||(i=i.add(jQuery("<li class='divider' value='divider-"+n.id+"' data-id=\"divider-"+n.id+'"></li>'))),i=i.add("<li class='disabled' value='divider-"+n.id+"' data-id=\"divider-"+n.id+"\"><a class='dropdown-item'>"+n.label+"</a></li>");else{var r=jQuery("<a class='dropdown-item'>"+n.label+"</a>");if(i=jQuery(jQuery("<li value='"+n.id+"' data-id=\""+n.id+'"></li>')),"icon"in n){var a=jQuery('<i class="fas fa-'+n.icon+' dropdown-icon"></i>');r.prepend(a)}i.append(r)}this._childMap.set(n.id,i),i.appendTo(this._dropdownMenu),t&&(t=!1)}},e.prototype.getChildElement=function(e){return this._childMap.get(e)||null},e.prototype.getElement=function(){return jQuery().add(this._buttonElement).add(this._dropdownMenu)},e}(n.BootstrapButtonView),n.BootstrapDropdownView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){this._id=e,this._buttonElement=jQuery("<select></select>"),this._buttonElement.addClass("btn btn-secondary navbar-btn dropdown"),this._childMap=new MyCoReMap}return e.prototype.updateButtonLabel=function(e){},e.prototype.updateButtonTooltip=function(e){},e.prototype.updateButtonIcon=function(e){},e.prototype.updateButtonClass=function(e){},e.prototype.updateButtonActive=function(e){},e.prototype.updateButtonDisabled=function(e){},e.prototype.updateChilds=function(e){for(var t in this._childMap.forEach(function(e,t){t.remove()}),this._childMap.clear(),e){var o=e[t],n=jQuery("<option value='"+o.id+"' data-id=\""+o.id+'">'+o.label+"</option>");this._childMap.set(o.id,n),n.appendTo(this._buttonElement)}},e.prototype.getChildElement=function(e){return this._childMap.get(e)||null},e.prototype.getElement=function(){return jQuery().add(this._buttonElement).add(this._buttonElement)},e}(),n.BootstrapLargeDropdownView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){var t=this;this._id=e,this.onChange=null,this.element=jQuery("<form></form>"),this.element.addClass("navbar-form"),this.element.css({display:"inline-block"}),this.childText=jQuery("<input type='text' class='form-control'/>"),this.childText.appendTo(this.element),this.childText.keydown(function(e){13==e.keyCode&&e.preventDefault()}),this.childText.keyup(function(e){e.keyCode&&27==e.keyCode&&(t.childText.val(""),t.childText.blur()),null!=t.onChange&&t.onChange()})}return e.prototype.updateValue=function(e){this.childText.val(e)},e.prototype.getValue=function(){return this.childText.val()},e.prototype.getElement=function(){return this.element},e.prototype.updatePlaceholder=function(e){this.childText.attr("placeholder",e)},e}(),n.BootstrapTextInputView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(){this._toolbar=jQuery("<nav></nav>"),this._toolbar.addClass("navbar navbar-expand-lg navbar-light bg-light")}return e.prototype.addChild=function(e){this._toolbar.append(e),this._toolbar.find(".btn-group.right.ml-auto").removeClass("ml-auto");var t=this._toolbar.find(".btn-group.right[data-tb-order]").toArray().sort(function(e,t){return parseInt(e.getAttribute("data-tb-order"))-parseInt(t.getAttribute("data-tb-order"))});0<t.length&&jQuery(t[0]).addClass("ml-auto")},e.prototype.removeChild=function(e){e.remove()},e.prototype.getElement=function(){return this._toolbar},e}(),n.BootstrapToolbarView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(){}return e.prototype.createToolbarView=function(){return new n.BootstrapToolbarView},e.prototype.createTextView=function(e){return new n.BootstrapTextView(e)},e.prototype.createImageView=function(e){return new n.BootstrapImageView(e)},e.prototype.createGroupView=function(e,t,o){return new n.BootstrapGroupView(e,t,o)},e.prototype.createDropdownView=function(e){return new n.BootstrapDropdownView(e)},e.prototype.createLargeDropdownView=function(e){return new n.BootstrapLargeDropdownView(e)},e.prototype.createButtonView=function(e){return new n.BootstrapButtonView(e)},e.prototype.createTextInputView=function(e){return new n.BootstrapTextInputView(e)},e}(),n.BootstrapToolbarViewFactory=i,n.ToolbarViewFactoryImpl=new i}(mycore||(mycore={})),console.log("DESKTOP MODULE");