var mycore,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();!function(e){var t,o,n;t=e.viewer||(e.viewer={}),o=t.model||(t.model={}),n=function(e){function t(){return e.call(this,"MyCoReMobileToolbar")||this}return __extends(t,e),t.prototype.addComponents=function(){this.addGroup(this._sidebarControllGroup),this.addGroup(this._zoomControllGroup),viewerDeviceSupportTouch&&(this._zoomControllGroup.removeComponent(this._zoomInButton),this._zoomControllGroup.removeComponent(this._zoomOutButton),this._zoomControllGroup.removeComponent(this._rotateButton)),this.addGroup(this._actionControllGroup),this.addGroup(this._closeViewerGroup),this.changeIcons()},t.prototype.changeIcons=function(){this._zoomInButton.icon="search-plus",this._zoomOutButton.icon="search-minus",this._zoomFitButton.icon="expand",this._zoomWidthButton.icon="arrows-h",this._closeViewerButton.icon="power-off",this._rotateButton.icon="rotate-right"},t}(o.MyCoReBasicToolbarModel),o.MyCoReMobileToolbarModel=n}(mycore||(mycore={})),function(t){var e,n,o;e=t.viewer||(t.viewer={}),n=e.components||(e.components={}),o=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t}return __extends(e,o),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.trigger(new n.events.ProvideToolbarModelEvent(this,new t.viewer.model.MyCoReMobileToolbarModel))},e}(n.ViewerComponent),n.MyCoReMobileToolbarProviderComponent=o}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReMobileToolbarProviderComponent),function(e){var t,o,n;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=function(e,t){this.images=e,this.selected=t,this._lastPosition=0},(o.imagebar||(o.imagebar={})).ImagebarModel=n}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.imagebar||(o.imagebar={}),i=function(){function e(e,t){this._imageSelectedCallback=t,this._idElementMap=new MyCoReMap,this._lastSelectedId="",this._container=jQuery("<div></div>"),this._container.addClass("imagebar"),e.append(this._container),this.registerEvents()}return e.prototype.registerEvents=function(){var o=this,n=!1,i=0,r=function(e){n=!1;var t=i;o._imageSelectedCallback(t,!1),o._container.removeClass("selecting"),e.preventDefault(),jQuery(window.document.body).unbind("touchmove",a),jQuery(window.document.body).unbind("touchend",r)},a=function(e){if(n){var t=e.originalEvent.targetTouches[0].pageX;o._imageSelectedCallback(t,!0),i=t}e.preventDefault()};this._container.bind("touchstart",function(e){i=e.originalEvent.targetTouches[0].pageX,n=!0,o._container.addClass("selecting"),e.preventDefault(),jQuery(window.document.body).bind("touchmove",a),jQuery(window.document.body).bind("touchend",r)})},e.prototype.addImage=function(e,t,o){var n=jQuery("<img />");if(n.attr("data-id",e),n.attr("src",t),n.addClass("miniImage"),this.viewportWidth/2>o)n.css({left:o});else{var i=this.viewportWidth-o-18;n.css({right:i})}this._container.append(n),this._idElementMap.set(e,n)},e.prototype.removeImage=function(e){var t=this._idElementMap.get(e);void 0!==t&&(t.attr("src",""),t.remove())},e.prototype.setSelectedImage=function(e,t,o){""!=this._lastSelectedId&&this.removeImage(this._lastSelectedId),this.addImage(e,t,o),this._idElementMap.get(e).addClass("selected"),this._lastSelectedId=e},Object.defineProperty(e.prototype,"viewportWidth",{get:function(){return this._container.width()},enumerable:!0,configurable:!0}),e.prototype.removeAllImages=function(){var o=this;this._idElementMap.forEach(function(e,t){o.removeImage(e)}),this._idElementMap.clear()},Object.defineProperty(e.prototype,"containerElement",{get:function(){return this._container},enumerable:!0,configurable:!0}),e}(),n.ImagebarView=i}(mycore||(mycore={})),function(a){var e,t,o,n;e=a.viewer||(a.viewer={}),t=e.widgets||(e.widgets={}),o=t.imagebar||(t.imagebar={}),n=function(){function s(e,t,o,n,i){this._container=e,this._urlPrefix=i,this._model=new a.viewer.widgets.imagebar.ImagebarModel(t,o);var r=this;this._view=new a.viewer.widgets.imagebar.ImagebarView(e,function(e,t){t?r._imageSelected(e):n(r.getImageForPosition(e))}),this.insertImages(),r=this,jQuery(window).bind("resize",function(){r.insertImages(),r.setImageSelected(r._model.selected)}),this.setImageSelected(o)}return s.prototype.insertImages=function(){this._view.removeAllImages();var e=this._model.images.length,t=this._view.viewportWidth,o=Math.floor(t/s.IMAGE_WIDTH),n=0;e<o&&(n=t/(o=e)/2);for(var i=Math.max(Math.floor(e/o),1),r=0;r<o;r++){var a=this._model.images[r*i];this.addImage(a,t/o*r+n)}},s.prototype.addImage=function(t,o){var n=this;t.requestImgdataUrl(function(e){n._view.addImage(t.id,e,o)})},s.prototype.getImageForPosition=function(e){var t=this._model.images.length,o=this._view.viewportWidth,n=Math.floor(e/(o/t));return this._model.images[n]},s.prototype.getPositionOfImage=function(e){var t=this._model.images.indexOf(e),o=this._model.images.length;return this._view.viewportWidth/o*t},s.prototype._imageSelected=function(t){var o=this,n=this.getImageForPosition(t);this._model._lastPosition=t;var i=this;void 0!==n&&n.requestImgdataUrl(function(e){i._model._lastPosition==t&&o._view.setSelectedImage(n.id,e,t)})},s.prototype.setImageSelected=function(e){this._model.selected=e,this._imageSelected(this.getPositionOfImage(e))},Object.defineProperty(s.prototype,"view",{get:function(){return this._view.containerElement},enumerable:!0,configurable:!0}),s.IMAGE_WIDTH=20,s}(),o.IviewImagebar=n}(mycore||(mycore={})),function(s){var e,u,t;e=s.viewer||(s.viewer={}),u=e.components||(e.components={}),t=function(n){function e(e,t){var o=n.call(this)||this;return o._settings=e,o._container=t,o._settings.mobile&&o.trigger(new u.events.WaitForEvent(o,u.events.StructureModelLoadedEvent.TYPE)),o}return __extends(e,n),e.prototype._init=function(e){var t,o=this,n=this._settings.filePath;for(var i in"/"==n.charAt(0)&&(n=n.substr(1)),e){var r;(r=e[i]).href==n&&(t=r)}var a=this;this._imagebar=new s.viewer.widgets.imagebar.IviewImagebar(this._container,e,t,function(e){o.trigger(new u.events.ImageSelectedEvent(a,e))},this._settings.tileProviderPath+this._settings.derivate+"/"),this.trigger(new u.events.ComponentInitializedEvent(this))},Object.defineProperty(e.prototype,"content",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return this._settings.mobile?[u.events.StructureModelLoadedEvent.TYPE,u.events.ImageChangedEvent.TYPE,u.events.CanvasTapedEvent.TYPE]:[]},enumerable:!0,configurable:!0}),e.prototype.handle=function(e){if(e.type==u.events.StructureModelLoadedEvent.TYPE){var t=e.structureModel._imageList,o=this._model=t;this._init(o)}if(e.type==u.events.ImageChangedEvent.TYPE){var n=e;void 0!==this._imagebar&&this._imagebar.setImageSelected(n.image)}e.type==u.events.CanvasTapedEvent.TYPE&&this._imagebar.view.slideToggle()},e}(u.ViewerComponent),u.MyCoReImagebarComponent=t}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReImagebarComponent),function(e){var t,n,o;t=e.viewer||(e.viewer={}),n=t.components||(t.components={}),o=function(o){function e(e){var t=o.call(this)||this;return t._settings=e,t}return __extends(e,o),Object.defineProperty(e.prototype,"handlesEvents",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.trigger(new n.events.ProvidePageLayoutEvent(this,new t.widgets.canvas.SinglePageLayout,!0))},e}(n.ViewerComponent),n.MyCoRePageMobileLayoutProviderComponent=o}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoRePageMobileLayoutProviderComponent),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e,t){this._element=jQuery("<div></div>"),this._element.addClass("group"),this._element.attr("data-id",e),this._element.css({float:t})}return e.prototype.addChild=function(e){this._element.append(e)},e.prototype.removeChild=function(e){e.remove()},e.prototype.getElement=function(){return this._element},e}(),n.MobileGroupView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){this._id=e,this._buttonElement=jQuery("<div></div>"),this._buttonElement.addClass("dropdown"),this._buttonElementInner=jQuery("<span></span>"),this._buttonElementInner.addClass("fas fa-bars"),this._buttonElementInner.appendTo(this._buttonElement),this._dropdown=jQuery("<select></select>"),this._dropdown.appendTo(this._buttonElement);var t=jQuery("<option selected disabled hidden value=''></option>");t.css({display:"none"}),t.appendTo(this._dropdown),this._childMap=new MyCoReMap}return e.prototype.updateButtonLabel=function(e){},e.prototype.updateButtonTooltip=function(e){},e.prototype.updateButtonIcon=function(e){},e.prototype.updateButtonClass=function(e){},e.prototype.updateButtonActive=function(e){},e.prototype.updateButtonDisabled=function(e){},e.prototype.updateChilds=function(e){for(var t in this._childMap.forEach(function(e,t){t.remove()}),this._childMap.clear(),e){var o=e[t],n=jQuery("<option value='"+o.id+"' data-id=\""+o.id+'">'+o.label+"</option>");this._childMap.set(o.id,n),n.appendTo(this._dropdown)}},e.prototype.getChildElement=function(e){return this._childMap.get(e)||null},e.prototype.getElement=function(){return jQuery().add(this._buttonElement)},e}(),n.MobileDropdownView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(e){this._lastIcon="",this._buttonElement=jQuery("<a></a>"),this._buttonElement.addClass("button"),this._buttonElement.attr("data-id",e),this._buttonLabel=jQuery("<span></span>"),this._buttonLabel.addClass("buttonLabel"),this._buttonElement.append(this._buttonLabel),this._buttonIcon=jQuery("<span></span>"),this._buttonElement.append(this._buttonIcon)}return e.prototype.updateButtonLabel=function(e){this._buttonLabel.text(e)},e.prototype.updateButtonTooltip=function(e){},e.prototype.updateButtonIcon=function(e){this._buttonIcon.removeClass("fas"),this._buttonIcon.removeClass("fa-"+this._lastIcon),this._buttonIcon.removeClass("icon-"+this._lastIcon),this._lastIcon=e,this._buttonIcon.addClass("fas"),this._buttonIcon.addClass("fa-"+e),this._buttonIcon.addClass("icon-"+e)},e.prototype.updateButtonClass=function(e){},e.prototype.updateButtonActive=function(e){},e.prototype.updateButtonDisabled=function(e){},e.prototype.getElement=function(){return this._buttonElement},e}(),n.MobileButtonView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(){this._toolbar=jQuery("<div></div>"),this._toolbar.addClass("mobile-toolbar")}return e.prototype.addChild=function(e){this._toolbar.append(e)},e.prototype.removeChild=function(e){e.remove()},e.prototype.getElement=function(){return this._toolbar},e}(),n.MobileToolbarView=i}(mycore||(mycore={})),function(e){var t,o,n,i;t=e.viewer||(e.viewer={}),o=t.widgets||(t.widgets={}),n=o.toolbar||(o.toolbar={}),i=function(){function e(){}return e.prototype.createTextInputView=function(e){throw new ViewerError("text input view not supported by Mobile!")},e.prototype.createToolbarView=function(){return new n.MobileToolbarView},e.prototype.createTextView=function(e){throw new ViewerError("text view not supported by Mobile!")},e.prototype.createImageView=function(e){throw new ViewerError("image view not supported by Mobile!")},e.prototype.createGroupView=function(e,t,o){return new n.MobileGroupView(e,o)},e.prototype.createDropdownView=function(e){return new n.MobileDropdownView(e)},e.prototype.createLargeDropdownView=function(e){return new n.MobileDropdownView(e)},e.prototype.createButtonView=function(e){return new n.MobileButtonView(e)},e}(),n.MobileToolbarViewFactory=i,n.ToolbarViewFactoryImpl=new i}(mycore||(mycore={})),console.log("MOBILE MODULE");