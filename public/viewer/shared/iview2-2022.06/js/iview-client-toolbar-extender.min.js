var mycore,__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var o,a,i,r,e;o=t.viewer||(t.viewer={}),a=o.components||(o.components={}),i=t.viewer.widgets.toolbar.ToolbarButton,r=t.viewer.widgets.toolbar.ToolbarGroup,e=function(n){function t(t){var e=n.call(this)||this;return e._settings=t,e.idEntryMapping=new MyCoReMap,e.idButtonMapping=new MyCoReMap,e.idGroupMapping=new MyCoReMap,e.toolbarModel=null,e.languageModel=null,e.toolbarButtonSync=Utils.synchronize([function(t){return null!=t.languageModel},function(t){return null!=t.toolbarModel}],function(t){return t.initLanguage()}),e}return __extends(t,n),t.prototype.init=function(){var e=this;"toolbar"in this._settings&&this._settings.toolbar.forEach(function(t){"group"==t.type?e.idGroupMapping.set(t.id,new r(t.id,t.order||70)):"button"==t.type&&e.idButtonMapping.set(t.id,new i(t.id,t.label,t.tooltip||t.label,t.icon)),e.idEntryMapping.set(t.id,t)}),this.trigger(new a.events.WaitForEvent(this,a.events.ProvideToolbarModelEvent.TYPE)),this.trigger(new a.events.ComponentInitializedEvent(this))},t.prototype.handle=function(e){var i=this;if(e.type==a.events.ProvideToolbarModelEvent.TYPE){var r=e;this.toolbarModel=r.model,this.idGroupMapping.forEach(function(t,e){r.model.addGroup(i.idGroupMapping.get(t))}),this.idButtonMapping.forEach(function(t,e){var n=i.idEntryMapping.get(t).inGroup,o=r.model.getGroups().filter(function(t){return n==t.name})[0];void 0!==o?o.addComponent(e):console.log("Can not find group "+n+"!")}),this.toolbarButtonSync(this)}if(e.type==o.widgets.toolbar.events.ButtonPressedEvent.TYPE){var t=e;this.idEntryMapping.hasThen(t.button.id,function(t){"action"in t&&t.action.apply(i,e),"href"in t&&(window.location.href=t.href)})}e.type==a.events.LanguageModelLoadedEvent.TYPE&&(this.languageModel=e.languageModel,this.toolbarButtonSync(this))},Object.defineProperty(t.prototype,"handlesEvents",{get:function(){return[a.events.ProvideToolbarModelEvent.TYPE,o.widgets.toolbar.events.ButtonPressedEvent.TYPE,a.events.LanguageModelLoadedEvent.TYPE]},enumerable:!0,configurable:!0}),t.prototype.initLanguage=function(){var n=this;this.idButtonMapping.forEach(function(t,e){e.label=n.languageModel.getTranslation(e.label),e.tooltip=n.languageModel.getTranslation(e.tooltip)})},t}(a.ViewerComponent),a.MyCoReToolbarExtenderComponent=e}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReToolbarExtenderComponent),console.log("toolbar-extender MODULE");